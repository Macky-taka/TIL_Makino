# アカウントの有効化
現時点では新規登録したユーザーは初めからすべての機能にアクセスできるようになっている。本章では、アカウントを有効化するステップを新規登録の途中に差し込むことで、本当にそのメールアドレスの持ち主なのかどうかを確認できるように
する。流れとしては、（1）有効化トークンやダイジェストを関連付けておいた状態で、（2）有効化トークンを含めたリンクをユーザーにメールで送信し、（3）ユーザーがそのリンクをクリックすると有効化できるようにする
というものだ。<br>
基本的な手順は以下となる。<br>
ユーザーの初期状態は「有効化されていない」（unactivated）にしておく。<br>
ユーザー登録が行われたときに、有効化トークンと、それに対応する有効化ダイジェストを生成する。<br>
有効化ダイジェストはデータベースに保存しておき、有効化トークンはメールアドレスと一緒に、ユーザーに送信する有効化用メールのリンクに仕込んでおく3 。<br>
ユーザーがメールのリンクをクリックしたら、アプリケーションはメールアドレスをキーにしてユーザーを探し、データベース内に保存しておいた有効化ダイジェストと比較することでトークンを認証する。<br>
ユーザーを認証できたら、ユーザーのステータスを「有効化されていない」から「有効化済み」（activated）に変更する。<br>
ログイン/記憶トークン/アカウントの有効化/パスワードの再設定で似ている点
|検索キー	|パスワード・トークン|	ダイジェスト	|認証|
|--------|-------------|---|---|
|```email```|```password```|```password_digest```|```authenticate(password)```|
|```id```|```remember_token```|```remember_digest```|```authenticated?(:remember, token)```|
|```email```|```activation_token```|```activation_digest```|```authenticated?(:activation, token)```|
|```email```|```reset_token```|```reset_digest```|```authenticated?(:reset, token)```|
